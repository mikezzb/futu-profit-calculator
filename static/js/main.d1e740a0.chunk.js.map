{"version":3,"sources":["config.js","store/TransactionStore.js","store/index.js","components/molecules/ProfitTable.js","constants/commissions.js","helpers/calculate.js","components/organisms/Calculator.js","pages/Home.js","App.js","reportWebVitals.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","TransactionStore","action","bound","this","init","makeObservable","transactions","loadFromStore","collection","get","then","snap","console","log","docs","map","item","data","id","transaction","Date","doc","set","unshift","observable","transactionStore","TransactionContext","createContext","StoreProvider","children","Provider","value","columns","field","headerName","hide","type","width","valueGetter","params","getValue","parseInt","toLocaleDateString","ProfitTable","rows","pageSize","className","autoHeight","FUTU_US_TRANSACTION_FEES","Object","freeze","COMMISSION","PLATFORM","CLEARING","FUTU_US_MIN_FEES","FUTU_US_BUY","PER_SHARE","MIN_FEES","FUTU_US_SALE","TRADING_ACTIVITY","PER_AMOUNT","SEC","getFee","fees","price","numOfShares","total","keys","forEach","key","Math","max","calculate","market","buyPrice","sellPrice","buyCommission","sellCommission","profit","percentageChange","toFixed","CalculatorRow","label","observer","useContext","useReducer","state","form","dispatchForm","generateResult","result","Paper","variant","elevation","RadioGroup","row","aria-label","name","onChange","e","target","FormControlLabel","control","Radio","Input","startAdornment","InputAdornment","position","Button","color","onClick","saveTransaction","length","Home","AppBar","Toolbar","IconButton","edge","Typography","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d1e740a0.chunk.js","sourcesContent":["import firebase from 'firebase/app';\n\nimport 'firebase/firestore';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyA1e63rwqOY0uC7wkhZxj1cXykR_h-ZnPE',\n  authDomain: 'leek-14509.firebaseapp.com',\n  projectId: 'leek-14509',\n  storageBucket: 'leek-14509.appspot.com',\n  messagingSenderId: '921404501955',\n  appId: '1:921404501955:web:415dda0acb6b590e4cd776',\n  measurementId: 'G-8RJKM3VLR7',\n};\n\nfirebase.initializeApp(firebaseConfig);\nconst db = firebase.firestore();\nexport { firebase, db };\n","import { makeObservable, observable, action } from 'mobx';\nimport { db } from '../config';\n\nclass TransactionStore {\n  @observable transactions;\n\n  constructor() {\n    this.init();\n    makeObservable(this);\n  }\n\n  @action.bound async init() {\n    this.transactions = [];\n    await this.loadFromStore();\n  }\n\n  @action async loadFromStore() {\n    db.collection('transactions').get().then(\n      snap => {\n        console.log(snap.docs.map(item => ({\n          ...item.data(),\n          id: item.id,\n        })));\n        this.transactions = snap.docs.map(item => ({\n          ...item.data(),\n          id: item.id,\n        }));\n      }\n    );\n  }\n\n  @action async saveTransaction(transaction) {\n    const id = +new Date();\n    db.doc(`transactions/${id}`)\n      .set({\n        ...transaction,\n        id,\n      })\n      .then(() => {\n        this.transactions.unshift({\n          ...transaction,\n          id,\n        });\n      });\n  }\n\n  @action.bound setTransactions(transactions) {\n    this.transactions = transactions;\n  }\n}\n\nexport default TransactionStore;\n","import React, { createContext } from 'react';\r\n\r\nimport TransactionStore from './TransactionStore';\r\n\r\nconst transactionStore = new TransactionStore();\r\n\r\nexport const TransactionContext = createContext();\r\n\r\nexport default function StoreProvider({ children }) {\r\n  return (\r\n    <TransactionContext.Provider value={transactionStore}>\r\n      {children}\r\n    </TransactionContext.Provider>\r\n  );\r\n}\r\n","import React, { useReducer, useState, useEffect } from 'react';\nimport { DataGrid } from '@material-ui/data-grid';\n\nimport './ProfitTable.css';\n\nconst columns = [\n  {\n    field: 'id', headerName: 'ID', hide: true,\n  },\n  {\n    field: 'date', headerName: 'Date', type: 'date', width: 130, valueGetter: params => `${(params.getValue('id') === 'calculator' ? 'Cal' : new Date(parseInt(params.getValue('id'), 10)).toLocaleDateString())}`,\n  },\n  {\n    field: 'profit', headerName: 'Profit ($)', width: 120, type: 'number',\n  },\n  {\n    field: 'percentageChange', headerName: 'Gain (%)', width: 120, type: 'number',\n  },\n  {\n    field: 'buyPrice', headerName: 'Buy ($)', width: 100, type: 'number',\n  },\n  {\n    field: 'sellPrice', headerName: 'Sell ($)', width: 100, type: 'number',\n  },\n];\n\nconst ProfitTable = ({ rows, pageSize }) => (\n  <div className=\"profit-table\">\n    <DataGrid\n      rows={rows}\n      columns={columns}\n      pageSize={pageSize || 5}\n      autoHeight\n    />\n  </div>\n);\n\nexport default ProfitTable;\n","const FUTU_US_TRANSACTION_FEES = Object.freeze({\n  COMMISSION: 0.0049,\n  PLATFORM: 0.005,\n  CLEARING: 0.003,\n});\n\nconst FUTU_US_MIN_FEES = Object.freeze({\n  COMMISSION: 0.99,\n  PLATFORM: 1,\n});\n\nconst FUTU_US_BUY = Object.freeze({\n  PER_SHARE: FUTU_US_TRANSACTION_FEES,\n  MIN_FEES: FUTU_US_MIN_FEES,\n});\n\nconst FUTU_US_SALE = Object.freeze({\n  PER_SHARE: {\n    ...FUTU_US_TRANSACTION_FEES,\n    TRADING_ACTIVITY: 0.000119,\n  },\n  PER_AMOUNT: {\n    SEC: 0.0000051,\n  },\n  MIN_FEES: {\n    ...FUTU_US_MIN_FEES,\n    TRADING_ACTIVITY: 0.01,\n    SEC: 0.01,\n  },\n});\n\nexport {\n  FUTU_US_BUY,\n  FUTU_US_SALE\n};\n","import { FUTU_US_BUY, FUTU_US_SALE } from '../constants/commissions';\n\nconst getFee = (fees, price, numOfShares) => {\n  let total = 0;\n  // For Per Share Fees\n  Object.keys(fees.PER_SHARE).forEach(key => {\n    total += Math.max(fees.PER_SHARE[key] * numOfShares, (key in fees.MIN_FEES ? fees.MIN_FEES[key] : 0));\n  });\n  // For Per Amount Fees\n  if ('PER_AMOUNT' in fees) {\n    Object.keys(fees.PER_AMOUNT).forEach(key => {\n      total += Math.max(fees.PER_AMOUNT[key] * numOfShares * price, (key in fees.MIN_FEES ? fees.MIN_FEES[key] : 0));\n    });\n  }\n  return total;\n};\n\nconst calculate = ({\n  market,\n  numOfShares,\n  buyPrice,\n  sellPrice,\n}) => {\n  if (market === 'US') {\n    const buyCommission = getFee(FUTU_US_BUY, buyPrice, numOfShares);\n    const sellCommission = getFee(FUTU_US_SALE, sellPrice, numOfShares);\n    const commission = buyCommission + sellCommission;\n    const profit = (sellPrice - buyPrice) * numOfShares - commission;\n    const percentageChange = profit / (buyPrice * numOfShares);\n    return {\n      profit: profit.toFixed(3),\n      buyCommission,\n      sellCommission,\n      percentageChange: (percentageChange * 100).toFixed(3),\n    };\n  }\n  return {};\n};\n\nexport default calculate;\n","import React, {\n  useReducer, useState, useEffect, useContext\n} from 'react';\nimport {\n  Paper, RadioGroup, FormControl, FormControlLabel, FormLabel,\n  Radio, TextField, InputAdornment, Input, InputLabel, Button,\n  Table, TableBody, TableCell, TableContainer, TableHead, TableRow\n} from '@material-ui/core';\nimport { DataGrid } from '@material-ui/data-grid';\nimport { MdLocationOn } from 'react-icons/md';\nimport { observer } from 'mobx-react-lite';\n\nimport { TransactionContext } from '../../store';\nimport ProfitTable from '../molecules/ProfitTable';\nimport calculate from '../../helpers/calculate';\nimport './Calculator.css';\nimport TransactionStore from '../../store/TransactionStore';\n\nconst CalculatorRow = ({ label, children }) =>\n  <div className=\"calculator-row\">\n    <div className=\"calculator-row-label\">{`${label}:`}</div>\n    {children}\n  </div>;\n\nconst Calculator = () => {\n  const transaction = useContext(TransactionContext);\n  const [form, dispatchForm] = useReducer(\n    (state, action) => ({ ...state, ...action }),\n    {\n      market: 'US',\n      numOfShares: 100,\n      buyPrice: 15,\n      sellPrice: 15,\n    }\n  );\n\n  const generateResult = () => {\n    const result = calculate(form);\n    return {\n      id: 'calculator',\n      profit: result.profit,\n      percentageChange: result.percentageChange,\n      buyPrice: form.buyPrice,\n      sellPrice: form.sellPrice,\n    };\n  };\n\n  return (\n    <div>\n      <Paper variant=\"outlined\" className=\"calculator-card\" elevation={1}>\n        <CalculatorRow label=\"Market\">\n          <RadioGroup row aria-label=\"market\" name=\"market\" value={form.market} onChange={e => dispatchForm({ market: e.target.value })}>\n            <FormControlLabel value=\"US\" control={<Radio />} label=\"US\" />\n            <FormControlLabel value=\"HK\" control={<Radio />} label=\"HK\" />\n          </RadioGroup>\n        </CalculatorRow>\n        <CalculatorRow label=\"Number of Shares\">\n          <Input\n            value={form.numOfShares}\n            onChange={e => dispatchForm({ numOfShares: e.target.value })}\n            startAdornment={<InputAdornment position=\"start\">N</InputAdornment>}\n          />\n        </CalculatorRow>\n        <CalculatorRow label=\"Buy\">\n          <Input\n            value={form.buyPrice}\n            onChange={e => dispatchForm({ buyPrice: e.target.value })}\n            startAdornment={<InputAdornment position=\"start\">$</InputAdornment>}\n          />\n        </CalculatorRow>\n        <CalculatorRow label=\"Sell\">\n          <Input\n            value={form.sellPrice}\n            onChange={e => dispatchForm({ sellPrice: e.target.value })}\n            startAdornment={<InputAdornment position=\"start\">$</InputAdornment>}\n          />\n        </CalculatorRow>\n        <div className=\"calculator-btn\">\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            elevation={2}\n            onClick={() => transaction.saveTransaction(generateResult())}\n          >\n            Record\n          </Button>\n        </div>\n      </Paper>\n      <ProfitTable\n        rows={\n          (transaction.transactions.length ? [\n            ...transaction.transactions,\n            generateResult(),\n          ] : [generateResult()])\n        }\n        pageSize={5}\n      />\n    </div>\n  );\n};\n\nexport default observer(Calculator);\n","import React from 'react';\nimport {\n  AppBar, Toolbar, IconButton, Typography, Button\n} from '@material-ui/core';\nimport { AiOutlineMenu } from 'react-icons/ai';\n\nimport Calculator from '../components/organisms/Calculator';\nimport './Home.css';\n\nconst Home = () => (\n  <div className=\"home\">\n    <AppBar className=\"header\">\n      <Toolbar>\n        <IconButton edge=\"start\" color=\"inherit\" aria-label=\"menu\">\n          <AiOutlineMenu />\n        </IconButton>\n        <Typography variant=\"h6\">\n          Leek\n        </Typography>\n      </Toolbar>\n    </AppBar>\n    <Calculator />\n  </div>\n);\n\nexport default Home;\n","import StoreProvider from './store';\nimport Home from './pages/Home';\nimport './App.css';\n\nfunction App() {\n  return (\n    <StoreProvider>\n      <div className=\"App\">\n        <Home />\n      </div>\n    </StoreProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}