(this.webpackJsonpleek=this.webpackJsonpleek||[]).push([[0],{142:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},155:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(14),i=n.n(c),o=(n(142),n(22)),s=n(38),l=n.n(s),u=n(71),d=n(106),b=n(64),j=n(65),p=n(39),O=(n(144),n(16)),h=n(75);n(157);h.a.initializeApp({apiKey:"AIzaSyA1e63rwqOY0uC7wkhZxj1cXykR_h-ZnPE",authDomain:"leek-14509.firebaseapp.com",projectId:"leek-14509",storageBucket:"leek-14509.appspot.com",messagingSenderId:"921404501955",appId:"1:921404501955:web:415dda0acb6b590e4cd776",measurementId:"G-8RJKM3VLR7"});var f,m,y,v,S,x,g=h.a.firestore(),T=(f=O.b.bound,m=O.b.bound,y=O.b.bound,v=O.b.bound,S=function(){function e(){Object(b.a)(this,e),Object(d.a)(this,"transactions",x,this),this.init(),Object(O.e)(this)}return Object(j.a)(e,[{key:"init",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.transactions=[],e.next=3,this.loadFromStore();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFromStore",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.collection("transactions").get().then((function(e){t.setTransactions(e.docs.map((function(e){return Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id})})))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"saveTransaction",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=+new Date,g.doc("transactions/".concat(n)).set(Object(o.a)(Object(o.a)({},t),{},{id:n})).then((function(){r.addToStore(Object(o.a)(Object(o.a)({},t),{},{id:String(n)}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTransactions",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach((function(e){g.doc("transactions/".concat(e)).delete().then((function(){return n.deleteWithId(e)}))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addToStore",value:function(e){this.transactions.unshift(e)}},{key:"deleteWithId",value:function(e){var t=this.transactions.findIndex((function(t){return t.id===e}));-1!==t?this.transactions.splice(t,1):console.log("Error!")}},{key:"setTransactions",value:function(e){this.transactions=e}}]),e}(),x=Object(p.a)(S.prototype,"transactions",[O.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(p.a)(S.prototype,"init",[f],Object.getOwnPropertyDescriptor(S.prototype,"init"),S.prototype),Object(p.a)(S.prototype,"loadFromStore",[O.b],Object.getOwnPropertyDescriptor(S.prototype,"loadFromStore"),S.prototype),Object(p.a)(S.prototype,"saveTransaction",[O.b],Object.getOwnPropertyDescriptor(S.prototype,"saveTransaction"),S.prototype),Object(p.a)(S.prototype,"deleteTransactions",[O.b],Object.getOwnPropertyDescriptor(S.prototype,"deleteTransactions"),S.prototype),Object(p.a)(S.prototype,"addToStore",[m],Object.getOwnPropertyDescriptor(S.prototype,"addToStore"),S.prototype),Object(p.a)(S.prototype,"deleteWithId",[y],Object.getOwnPropertyDescriptor(S.prototype,"deleteWithId"),S.prototype),Object(p.a)(S.prototype,"setTransactions",[v],Object.getOwnPropertyDescriptor(S.prototype,"setTransactions"),S.prototype),S),P=n(9),E=new T,w=Object(r.createContext)();function k(e){var t=e.children;return Object(P.jsx)(w.Provider,{value:E,children:t})}var N=n(209),I=n(207),A=n(53),R=n(120),M=n(115),C=n(24),D=n(8),F=n(90),_=n(212),z=n(163),L=n(210),U=n(205),G=n(208),H=n(54),W=n(113),V=n(107),Y=(n(152),[{field:"id",hide:!0},{field:"date",headerName:"Date",type:"date",width:130,valueGetter:function(e){return"".concat(e.getValue("id")?new Date(parseInt(e.getValue("id"),10)).toLocaleDateString():"Calculation")}},{field:"profit",headerName:"Profit ($)",width:120,type:"number"},{field:"percentageChange",headerName:"Gain (%)",width:120,type:"number"},{field:"buyPrice",headerName:"Buy ($)",width:100,type:"number"},{field:"sellPrice",headerName:"Sell ($)",width:100,type:"number"},{field:"numOfShares",headerName:"Shares",width:100,type:"number"}]),B=function(e){var t=e.rows,n=e.pageSize,a=e.deleteTransactions,c=Object(r.useState)([]),i=Object(D.a)(c,2),o=i[0],s=i[1];return Object(P.jsxs)("div",{className:"profit-table",children:[Object(P.jsx)(V.a,{rows:t,columns:Y,pageSize:n||5,sortModel:[{field:"id",sort:"asc"}],checkboxSelection:!0,autoHeight:!0,onSelectionModelChange:function(e){return s(e.selectionModel)}}),Boolean(o.length)&&Object(P.jsx)("div",{className:"std-btn",children:Object(P.jsx)(H.a,{variant:"outlined",color:"primary",elevation:2,onClick:function(){return a(o)},children:"delete"})})]})},$=Object.freeze({COMMISSION:.0049,PLATFORM:.005,CLEARING:.003}),K=Object.freeze({COMMISSION:.99,PLATFORM:1}),J=Object.freeze({PER_SHARE:$,MIN_FEES:K}),Z=Object.freeze({PER_SHARE:Object(o.a)(Object(o.a)({},$),{},{TRADING_ACTIVITY:119e-6}),PER_AMOUNT:{SEC:51e-7},MIN_FEES:Object(o.a)(Object(o.a)({},K),{},{TRADING_ACTIVITY:.01,SEC:.01})}),q=Object.freeze({SETTLEMENT:2e-5,STAMP_DUTY:.001,TRADING:5e-5,LEVY:27e-6}),X=Object.freeze({PLATFORM:15,TARIFF:.5,SETTLEMENT:2,STAMP_DUTY:1,TRADING:.01,LEVY:.01}),Q=Object.freeze({PER_AMOUNT:q,MIN_FEES:X}),ee=Q,te=function(e,t,n){var r=0,a=Object(o.a)({},e.MIN_FEES);return"PER_SHARE"in e&&Object.keys(e.PER_SHARE).forEach((function(t){var c=e.PER_SHARE[t]*n;t in a&&(c=Math.max(c,a[t]),delete a[t]),r+=c})),"PER_AMOUNT"in e&&Object.keys(e.PER_AMOUNT).forEach((function(c){var i=e.PER_AMOUNT[c]*n*t;c in a&&(i=Math.max(i,a[c]),delete a[c]),r+=i})),r+=Object.keys(a).length?Object.values(a).reduce((function(e,t){return e+t})):0},ne=function(e){var t=e.market,n=e.numOfShares,r=e.buyPrice,a=e.sellPrice,c="US"===t?Z:ee,i=te("US"===t?J:Q,r,n),o=te(c,a,n),s=(a-r)*n-(i+o),l=s/(r*n);return{profit:s.toFixed(3),buyCommission:i,sellCommission:o,percentageChange:(100*l).toFixed(3)}},re=(n(153),function(e){var t=e.label,n=e.children;return Object(P.jsxs)("div",{className:"calculator-row",children:[Object(P.jsx)("div",{className:"calculator-row-label",children:"".concat(t,":")}),n]})}),ae=Object(W.a)((function(){var e=Object(r.useContext)(w),t=Object(r.useReducer)((function(e,t){return Object(o.a)(Object(o.a)({},e),t)}),{market:"US",numOfShares:100,buyPrice:15,sellPrice:15}),n=Object(D.a)(t,2),a=n[0],c=n[1],i=function(){var e=ne(a);return{id:0,profit:e.profit,percentageChange:e.percentageChange,buyPrice:a.buyPrice,sellPrice:a.sellPrice,numOfShares:a.numOfShares}};return Object(P.jsxs)("div",{children:[Object(P.jsxs)(F.a,{variant:"outlined",className:"calculator-card",elevation:1,children:[Object(P.jsx)(re,{label:"Market",children:Object(P.jsxs)(_.a,{fullWidth:!0,row:!0,"aria-label":"market",name:"market",value:a.market,onChange:function(e){return c({market:e.target.value})},children:[Object(P.jsx)(z.a,{value:"US",control:Object(P.jsx)(L.a,{}),label:"US"}),Object(P.jsx)(z.a,{value:"HK",control:Object(P.jsx)(L.a,{}),label:"HK"})]})}),Object(P.jsx)(re,{label:"Shares",children:Object(P.jsx)(U.a,{fullWidth:!0,type:"number",value:a.numOfShares,onChange:function(e){return c({numOfShares:e.target.value})},startAdornment:Object(P.jsx)(G.a,{position:"start",children:"x"})})}),Object(P.jsx)(re,{label:"Buy",children:Object(P.jsx)(U.a,{fullWidth:!0,type:"number",value:a.buyPrice,onChange:function(e){return c({buyPrice:e.target.value})},startAdornment:Object(P.jsx)(G.a,{position:"start",children:"$"})})}),Object(P.jsx)(re,{label:"Sell",children:Object(P.jsx)(U.a,{fullWidth:!0,type:"number",value:a.sellPrice,onChange:function(e){return c({sellPrice:e.target.value})},startAdornment:Object(P.jsx)(G.a,{position:"start",children:"$"})})}),Object(P.jsx)("div",{className:"calculator-btn",children:Object(P.jsx)(H.a,{variant:"outlined",color:"primary",elevation:2,onClick:function(){return e.saveTransaction(i())},children:"Record"})})]}),Object(P.jsx)(B,{rows:e.transactions.length?[].concat(Object(C.a)(e.transactions),[i()]):[i()],pageSize:5,deleteTransactions:function(t){return e.deleteTransactions(t)}})]})})),ce=(n(154),function(){return Object(P.jsxs)("div",{className:"home",children:[Object(P.jsx)(N.a,{className:"header",children:Object(P.jsxs)(I.a,{children:[Object(P.jsx)(A.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(P.jsx)(M.a,{})}),Object(P.jsx)(R.a,{variant:"h6",children:"Leek"})]})}),Object(P.jsx)(ae,{})]})});n(155);var ie=function(){return Object(P.jsx)(k,{children:Object(P.jsx)("div",{className:"App",children:Object(P.jsx)(ce,{})})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,213)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(P.jsx)(a.a.StrictMode,{children:Object(P.jsx)(ie,{})}),document.getElementById("root")),oe()}},[[156,1,2]]]);
//# sourceMappingURL=main.e74d5325.chunk.js.map